<div class="breadcrumbs text-sm ms-5 mb-3">
  <ul>
    <li><a routerLink="">Home</a></li>
    <li><a routerLink="/shopPage">Catalogo</a></li>
    <li *ngIf="product">{{ product.name }}</li>
  </ul>
</div>
<!-- page start -->

<div class="flex">
  <!-- info generali -->
  <div class="rounded-lg bg-base-300 w-fit p-4 m-3">
    <h3 class="text-xl font-semibold">Informazioni generali</h3>
    <span class="label-text">Nome prodotto</span>
    <input
      type="text"
      placeholder="es. Mouse Pulsar X-ultralight"
      class="input input-bordered w-full mb-4"
    />
    <span class="label-text">Descrizione prodotto</span>
    <textarea
      type="text"
      placeholder="es. Mouse Pulsar X-ultralight è il mouse più leggero al mondo..."
      class="input input-bordered w-full h-20 mb-4"
    ></textarea>
  </div>

  <!-- immagini -->
  <div
    class="rounded-lg bg-base-300 p-4 m-3 flex flex-col max-w-[347px] overflow-x-hidden"
  >
    <!-- preview -->
    <div
      *ngIf="selectedFiles.length === 0"
      class="flex-grow bg-secondary rounded-lg mb-4 flex items-center justify-center"
    >
      <h4>Image Preview</h4>
    </div>
    <div #scrollableElement class="flex carousel carousel-center gap-3">
      <!-- img ngfor -->
      <div
        *ngFor="let item of imgsArr; let i = index"
        id="item{{ i }}"
        class="bg-secondary max-w-[347px] rounded-lg mb-4 flex items-center justify-center relative carousel-item"
        style="width: 200px; height: 200px"
      >
        <img
          [src]="item"
          alt="Image Preview"
          class="object-cover rounded-box w-full h-full"
        />
        <button
          (click)="deleteImg(i)"
          class="btn btn-xs btn-secondary absolute top-0 right-0 m-3"
        >
          X
        </button>
      </div>
    </div>
    <div class="flex w-full justify-center gap-2 pb-2">
      <a
        *ngFor="let item of imgsArr; let i = index"
        class="btn btn-xs"
        (click)="scrolla(i * 200)"
        >{{ i + 1 }}</a
      >
    </div>
    <!-- input -->
    <input
      multiple
      type="file"
      class="file-input file-input-sm file-input-bordered file-input-primary max-w-xs"
      (change)="onMultiFileSelected($event)"
    />
    <!-- scroll buttons -->
    <div class="flex justify-between mt-2">
      <button class="btn btn-sm" (click)="scrollCarousel(0)">Prev</button>
      <button class="btn btn-sm" (click)="scrollCarousel(1)">Next</button>
    </div>
  </div>
</div>

<!-- titoli e descrizioni 1-->
<div class="rounded-lg bg-base-300 w-full max-w-[757px] p-4 m-3 flex">
  <div class="w-2/3 pe-4">
    <h3 class="text-xl font-semibold">Informazioni Prima Slide</h3>
    <span class="label-text">Titolo hero</span>
    <input
      type="text"
      placeholder="es. Sensore Pulsar XS-1"
      class="input input-bordered w-full mb-4"
    />
    <span class="label-text">Descrizione hero</span>
    <textarea
      type="text"
      placeholder="es.Il sensore XS-1, esclusivo di Pulsar, vanta un'impressionante risoluzione di 32.000 dpi, una velocità di tracciamento di 750 IPS e un'accelerazione..."
      class="input input-bordered w-full h-20 mb-4"
    ></textarea>
  </div>
  <div class="w-1/3 flex flex-col">
    <div
      class="flex-grow bg-secondary rounded-lg h-full mb-4 flex items-center justify-center"
    >
      <h4 *ngIf="!primaImg">Image Preview</h4>
      <img *ngIf="primaImg" [src]="primaImg" alt="Image Preview" />
    </div>
    <input
      type="file"
      class="file-input file-input-sm file-input-bordered file-input-primary w-full max-w-xs"
      (change)="onFileSelected($event, 1)"
    />
  </div>
</div>
<!-- titoli e descrizioni 2-->
<div class="rounded-lg bg-base-300 w-full max-w-[757px] p-4 m-3 flex">
  <div class="w-2/3 pe-4">
    <h3 class="text-xl font-semibold">Informazioni Prima Slide</h3>
    <span class="label-text">Titolo hero</span>
    <input
      type="text"
      placeholder="es. Sensore Pulsar XS-1"
      class="input input-bordered w-full mb-4"
    />
    <span class="label-text">Descrizione hero</span>
    <textarea
      type="text"
      placeholder="es.Il sensore XS-1, esclusivo di Pulsar, vanta un'impressionante risoluzione di 32.000 dpi, una velocità di tracciamento di 750 IPS e un'accelerazione..."
      class="input input-bordered w-full h-20 mb-4"
    ></textarea>
  </div>
  <div class="w-1/3 flex flex-col">
    <div
      class="flex-grow bg-secondary rounded-lg h-full mb-4 flex items-center justify-center"
    >
      <h4 *ngIf="!secondaImg">Image Preview</h4>
      <img *ngIf="secondaImg" [src]="secondaImg" alt="Image Preview" />
    </div>
    <input
      type="file"
      class="file-input file-input-sm file-input-bordered file-input-primary w-full max-w-xs"
      (change)="onFileSelected($event, 2)"
    />
  </div>
</div>

<!-- category -->
<div class="rounded-lg bg-base-300 w-fit p-4 m-3">
  <h3 class="text-xl font-semibold">Categoria</h3>
  <!-- input select -->
  <label class="form-control w-full max-w-xs mt-1">
    <div class="label">
      <span class="label-text">Seleziona categoria</span>
    </div>
    <select [(ngModel)]="category" class="select select-bordered">
      <option value="" selected>Pick one</option>
      <option value="{{ cat.name }}" *ngFor="let cat of category">
        {{ cat.name }}
      </option>
    </select>
  </label>
  <div class="divider">Oppure</div>

  <!-- Open the modal using ID.showModal() method -->
  <button
    class="btn btn-sm btn-secondary w-full"
    onclick="my_modal_1.showModal()"
  >
    Crea nuova categoria
  </button>
  <dialog id="my_modal_1" class="modal">
    <div class="modal-box">
      <div>
        <h3 class="text-lg font-bold">Aggiungi Categoria</h3>
      </div>

      <div class="modal-action justify-normal mt-3 w-full">
        <form method="dialog">
          <!-- if there is a button in form, it will close the modal -->
          <button class="btn btn-xs absolute top-0 right-0 m-6">X</button>
        </form>
        <!-- form -->
        <div class="w-full">
          <p class="pb-2">Inserisci nome categoria</p>
          <input
            [(ngModel)]="newCategory"
            type="text"
            placeholder="Type here"
            class="input input-bordered w-full mb-4"
          />
          <form method="dialog">
            <button
              (click)="newCategorySubmit()"
              class="btn btn-primary btn-sm w-full"
            >
              Salva
            </button>
          </form>
        </div>
      </div>
    </div>
  </dialog>
</div>
